
@using Enjoy.Core.Models;
@using Enjoy.Core.ViewModels;
@using Enjoy.Core;     
@model Enjoy.Core.Models.PagingData<CardCouponWithoutWapperViewModel>
<div id="page-wrapper">
    <!-- /.row -->
    <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header">优惠券</h1>
        </div>
        <!-- /.col-lg-12 -->
    </div>
    <div class="row">
        <div class="col-lg-12">
            <!-- /.panel -->
            <div class="panel panel-default">
                <div class="panel-heading">
                    <a type="button" class="btn btn-primary btn-sm" href="/cards/createcoupon"><i class="fa fa-plus fa-fw"></i>新增券</a>
                    <a type="button" class="btn btn-primary btn-sm" href="/cards/createmcard"><i class="fa fa-plus fa-fw"></i>新增会员卡</a>
                    <div class="pull-right">
                        <div class="btn-group">
                            <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">
                                快速查询
                                <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu pull-right" role="menu">
                                <li>
                                    <a href="#"></a>
                                </li>
                                <li>
                                    <a href="#">已投放</a>
                                </li>
                                <li>
                                    <a href="#">未投放</a>
                                </li>
                                <li>
                                    <a href="#">已过期</a>
                                </li>
                                <li class="divider"></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <!-- /.panel-heading -->
                <div class="panel-body">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="table-responsive">
                                <table class="table table-bordered table-hover table-striped">
                                    <thead>
                                        <tr>
                                            
                                            <th>卡券编号</th>
                                            <th>所属商户</th>
                                            <th>卡券名称</th>
                                            <th>卡券类型</th>
                                            <th>创建时间</th>
                                            <th>修改时间</th>
                                            <th>库存</th>
                                            <th>状态</th>
                                            <th></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @if (Model.TotalCount > 0)
                                        {
                                            foreach (var item in Model.Items)
                                            {
                                                <tr>
                                                    
                                                    <td>@item.WxNo</td>
                                                    <td>@item.MerchantName</td>
                                                    <td>@item.BrandName</td>
                                                    <td>@item.TypeName</td>
                                                    <td>@(item.CreatedTime.HasValue ? item.CreatedTime.Value.ToString("yyyy-MM-dd HH:mm") : "")</td>
                                                    <td>@(item.LastUpdateTime.HasValue ? item.LastUpdateTime.Value.ToString("yyyy-MM-dd HH:mm") : "")</td>
                                                    <td>@item.Quantity</td>
                                                    <td>@item.Status.TextOf()</td>
                                                    <td>
                                                        <a href="@(item.Type== CardTypes.MEMBER_CARD
                                                    ?"/cards/createmcard?id="+item.Id.ToString()
                                                    :"/cards/createcoupon?id="+item.Id.ToString())">
                                                            
                                                        </a>
                                                        <a href="/cards/publish?id=@item.Id">发布</a>
                                                        <a href="/cards/showqr?id=@item.Id">投放</a>
                                                    </td>
                                                </tr>
                                            }
                                        }
                                        else
                                        {
                                            <tr>
                                                <td colspan="7">
                                                    <label>没有数据</label>
                                                </td>
                                            </tr>
                                        }

                                    </tbody>
                                </table>
                            </div>
                            <!-- /.table-responsive -->
                        </div>
                        <!-- /.col-lg-4 (nested) -->
                        <div class="col-lg-8">
                            <div id="morris-bar-chart"></div>
                        </div>
                        <!-- /.col-lg-8 (nested) -->
                    </div>
                    <!-- /.row -->
                </div>
                <div class="panel-footer">
                    优惠券分为折扣券、礼品券、优惠券,优惠券（现金抵扣）
                </div>
            </div>
        </div>
    </div>
</div>

@using (Script.Foot())
{
    <script src="/Themes/EnjoyTheme/Content/home/js/jquery-1.11.1.min.js"></script>
    <script src="/Themes/EnjoyTheme/Content/scripts/jquery.cxselect.min.js"></script>
    <script src="/Themes/EnjoyTheme/Content/scripts/ajaxfileupload.js"></script>
    <script>
        $(document).ready(function () {

        });
    </script>
}